{% load static %}
<!doctype html>
<html lang="pt-br">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>{% block title %}Kair√≥s.app{% endblock %}</title>

  <!-- Bootstrap -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">

  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">

  <!-- Theme -->
  <link rel="stylesheet" href="{% static 'core/theme.css' %}">

  <!-- Fallback styles (garante que fique bonito mesmo se theme.css estiver t√≠mido) -->
  <style>
    :root{
      --ka-bg: #0b1220;
      --ka-card: #0f172a;
      --ka-border: rgba(255,255,255,.08);
      --ka-text: rgba(255,255,255,.92);
      --ka-muted: rgba(255,255,255,.68);
      --ka-primary: #4f46e5;   /* indigo */
      --ka-primary-2: #7c3aed; /* purple */
      --ka-glow: 0 10px 30px rgba(79,70,229,.18);
    }

    body.ap-body{
      font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, sans-serif;
    }

    /* NAVBAR s√≥lida (sem virar fantasma quando rola) */
    .ka-navbar{
      background: rgba(15, 23, 42, .98) !important; /* s√≥lido */
      border-bottom: 1px solid var(--ka-border);
      box-shadow: 0 8px 24px rgba(0,0,0,.25);
      backdrop-filter: none !important; /* evita translucidez real */
    }

    .ka-navbar .navbar-brand .ka-logo{
      display:inline-flex;
      width:34px;
      height:34px;
      align-items:center;
      justify-content:center;
      border-radius: 10px;
      background: linear-gradient(135deg, var(--ka-primary), var(--ka-primary-2));
      box-shadow: var(--ka-glow);
      color: #fff;
      font-size: 16px;
    }

    .ka-navbar .navbar-brand small{
      color: var(--ka-muted) !important;
    }

    /* Links ‚Äúpill‚Äù bonitos */
    .ka-navlink{
      padding: .55rem .85rem !important;
      border-radius: 999px;
      color: rgba(255,255,255,.86) !important;
      transition: all .15s ease;
      border: 1px solid transparent;
    }
    .ka-navlink:hover{
      background: rgba(255,255,255,.06);
      border-color: rgba(255,255,255,.08);
      transform: translateY(-1px);
    }

    /* Destaque do item ativo */
    .ka-navlink.active{
      background: rgba(79,70,229,.18);
      border-color: rgba(79,70,229,.35);
      color: #fff !important;
      box-shadow: 0 10px 25px rgba(79,70,229,.12);
    }

    /* CTA Buttons */
    .ka-cta{
      display:flex;
      gap:.5rem;
      align-items:center;
      margin-left: .5rem;
    }
    .ka-btn{
      border-radius: 999px;
      padding: .55rem .9rem;
      font-weight: 600;
      border: 1px solid rgba(255,255,255,.10);
      transition: all .15s ease;
      text-decoration: none;
      display:inline-flex;
      align-items:center;
      gap:.45rem;
      white-space: nowrap;
    }
    .ka-btn:hover{ transform: translateY(-1px); }

    .ka-btn-primary{
      background: linear-gradient(135deg, var(--ka-primary), var(--ka-primary-2));
      color:#fff;
      border-color: rgba(255,255,255,.10);
      box-shadow: var(--ka-glow);
    }
    .ka-btn-primary:hover{ filter: brightness(1.05); }

    .ka-btn-ghost{
      background: rgba(255,255,255,.06);
      color: rgba(255,255,255,.92);
    }
    .ka-btn-ghost:hover{
      background: rgba(255,255,255,.10);
      border-color: rgba(255,255,255,.14);
    }

    /* Evita conte√∫do ‚Äúcolado‚Äù no topo em √¢ncoras / rolagem */
    main.ka-main{
      scroll-margin-top: 90px;
    }

    /* Footer */
    .ka-footer{
      border-top: 1px solid var(--ka-border);
      background: rgba(15,23,42,.85);
    }

    /* Mensagens mais compactas */
    .alert{
      border-radius: 14px;
      border: 1px solid rgba(255,255,255,.08);
    }

    /* Mobile: CTA vira bloco */
    @media (max-width: 991px){
      .ka-cta{
        margin: .75rem 0 0 0;
        flex-wrap: wrap;
      }
      .ka-btn{
        width: 100%;
        justify-content: center;
      }
    }
  </style>

  {% block extra_css %}{% endblock %}
</head>

<body class="ap-body">

  <!-- NAVBAR (s√≥lida, premium, sem sobrescrever conte√∫do) -->
<div class="card border-0 shadow-sm rounded-4 mb-4">
  <div class="card-body d-flex justify-content-between align-items-center">
    <div>
      <div class="text-muted small">Conta ativa</div>
      <div class="fw-bold">
        {{ current_shop.nome }}
      </div>
      <div class="text-muted small">
        Usu√°rio: @{{ current_user.username }}
      </div>
    </div>
    <span class="badge text-bg-success">Online</span>
  </div>
</div>
  <nav class="navbar navbar-expand-lg ka-navbar sticky-top">
    <div class="container">
      <a class="navbar-brand d-flex align-items-center gap-2" href="{% url 'homemcom_dashboard' %}">
        <span class="ka-logo">üïõ</span>
        <div class="d-flex flex-column lh-1">
          <span class="fw-bold text-white">Kair√≥s.app</span>
          <small class="ka-sub">O tempo certo de acontecer</small>
        </div>
      </a>

      <button class="navbar-toggler text-white border-0" type="button" data-bs-toggle="collapse" data-bs-target="#kaNav" aria-controls="kaNav" aria-expanded="false" aria-label="Menu">
        <span class="navbar-toggler-icon"></span>
      </button>


      <div class="collapse navbar-collapse" id="kaNav">
        <ul class="navbar-nav ms-auto align-items-lg-center gap-lg-1 mt-3 mt-lg-0">
          <li class="nav-item">
            <a class="nav-link ka-navlink {% if request.resolver_match.url_name == 'homemcom_dashboard' %}active{% endif %}"
               href="{% url 'homemcom_dashboard' %}">Dashboard</a>
          </li>
          <li class="nav-item">
            <a class="nav-link ka-navlink {% if request.resolver_match.url_name == 'homemcom_semana' %}active{% endif %}"
               href="{% url 'homemcom_semana' %}">Semana</a>

          </li>
<li class="nav-item">
  <a href="{% url 'homemcom_agenda_inteligente' %}" class="nav-link ka-navlink">
    <span class="nav-icon">üß†</span>
    <span>Agenda inteligente</span>
  </a>
</li>

          <li class="nav-item">
            <a class="nav-link ka-navlink {% if request.resolver_match.url_name == 'homemcom_relatorios' %}active{% endif %}"
               href="{% url 'homemcom_relatorios' %}">Relat√≥rios</a>
          </li>
          <li class="nav-item">
            <a class="nav-link ka-navlink {% if request.resolver_match.url_name == 'homemcom_planos' %}active{% endif %}"
               href="{% url 'homemcom_planos' %}">Planos</a>

          </li>
          <li class="nav-item">
            <a class="nav-link ka-navlink {% if request.resolver_match.url_name == 'homemcom_configuracoes' %}active{% endif %}"
               href="{% url 'homemcom_configuracoes' %}">Configura√ß√µes</a>
          </li>
        </li>
          <li class="nav-item">
            <a class="nav-link ka-navlink {% if request.resolver_match.url_name == 'homemcom_guia_sistema' %}active{% endif %}"
               href="{% url 'homemcom_guia_sistema' %}">Guia Pr√°tico</a>
          <!-- CTA: Bot√µes chamativos -->
          <li class="nav-item ka-cta">
            <a class="ka-btn ka-btn-primary" href="{% url 'homemcom_novo_agendamento' %}">
              ‚ûï <span>Agendamento</span>
            </a>
            <a class="ka-btn ka-btn-primary" href="{% url 'homemcom_venda_produto' %}">
              üßæ <span>Venda</span>
          
            </a>
          </li>

   <form method="post" action="{% url 'sair' %}" class="d-inline">
  {% csrf_token %}
  <button type="submit" class="btn btn-link nav-link ka-navlink p-0">
    Sair
  </button>
</form>
        </ul>
      </div>
    </div>
  </nav>

  <!-- FLASH MESSAGES -->
  <div class="container mt-3">
    {% if messages %}
      {% for message in messages %}
        <div class="alert alert-{{ message.tags }} shadow-sm" role="alert">{{ message }}</div>
      {% endfor %}
    {% endif %}
  </div>

  <main class="container ka-main py-3 py-lg-4">
    {% block content %}{% endblock %}
  </main>

  <footer class="ka-footer py-4">
    <div class="container d-flex flex-column flex-md-row justify-content-between align-items-center gap-2">
      <small class="text-muted">¬© {% now 'Y' %} Kair√≥s.app</small>
      <small class="text-muted">Feito para rodar leve, bonito e sem frescura (s√≥ um pouco üòÑ).</small>
    </div>
  </footer>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  {% block extra_js %}{% endblock %}
</body>
</html>