{% extends 'agenda/base.html' %}

{% block title %}Configurações{% endblock %}

{% block content %}
<div class="container py-4">
  <div class="d-flex align-items-center justify-content-between mb-3">
    <div>
      <h2 class="h4 mb-1">Configurações</h2>
      <div class="text-muted small">Serviços, produtos e horários de funcionamento</div>
    </div>
  </div>

  <div class="row g-3">
    <!-- SERVIÇOS -->
    <div class="col-lg-6">
      <div class="card border-0 shadow-sm rounded-4 h-100">
        <div class="card-body p-4">
          <div class="d-flex align-items-center justify-content-between mb-3">
            <div>
              <div class="fw-semibold">Serviços</div>
              <div class="text-muted small">O que aparece no agendamento</div>
            </div>
            <a href="{% url 'homemcom_novo_servico' %}" class="btn btn-sm btn-dark rounded-pill">
              + Novo
            </a>
          </div>

          <div class="list-group list-group-flush">
            {% for s in servicos %}
              <div class="list-group-item d-flex align-items-center justify-content-between px-0">
                <div class="pe-3">
                  <div class="fw-semibold">{{ s.nome }}</div>
                  <div class="text-muted small">{{ s.duracao_minutos }} min · R$ {{ s.preco }}</div>
                </div>

                <div class="d-flex gap-2">
                  <a class="btn btn-sm btn-outline-secondary rounded-pill"
                     href="{% url 'homemcom_editar_servico' s.id %}">
                    Editar
                  </a>

                  <a class="btn btn-sm btn-outline-danger rounded-pill"
                     href="{% url 'homemcom_excluir_servico' s.id %}">
                    Excluir
                  </a>
                </div>
              </div>
            {% empty %}
              <div class="text-muted">Nenhum serviço cadastrado.</div>
            {% endfor %}
          </div>

          <div class="mt-3 small text-muted">
            * Dica SaaS: “Excluir” desativa o serviço (não apaga histórico).
          </div>
        </div>
      </div>
    </div>

    <!-- PRODUTOS -->
    <div class="col-lg-6">
      <div class="card border-0 shadow-sm rounded-4 h-100">
        <div class="card-body p-4">
          <div class="d-flex align-items-center justify-content-between mb-3">
            <div>
              <div class="fw-semibold">Produtos</div>
              <div class="text-muted small">Para vendas rápidas no caixa</div>
            </div>
            <a href="{% url 'homemcom_novo_produto' %}" class="btn btn-sm btn-dark rounded-pill">
              + Novo
            </a>
          </div>

          <div class="list-group list-group-flush">
            {% for p in produtos %}
              <div class="list-group-item d-flex align-items-center justify-content-between px-0">
                <div class="pe-3">
                  <div class="fw-semibold">{{ p.nome }}</div>
                  <div class="text-muted small">R$ {{ p.preco }}</div>
                </div>

                <div class="d-flex gap-2">
                  <a class="btn btn-sm btn-outline-secondary rounded-pill"
                     href="{% url 'homemcom_editar_produto' p.id %}">
                    Editar
                  </a>

                  <a class="btn btn-sm btn-outline-danger rounded-pill"
                     href="{% url 'homemcom_excluir_produto' p.id %}">
                    Excluir
                  </a>
                </div>
              </div>
            {% empty %}
              <div class="text-muted">Nenhum produto cadastrado.</div>
            {% endfor %}
          </div>

          <div class="mt-3 small text-muted">
            * Dica SaaS: “Excluir” desativa o produto (não apaga vendas antigas).
          </div>
        </div>
      </div>
    </div>

    <!-- HORÁRIOS -->
    <div class="col-12">
      <div class="card border-0 shadow-sm rounded-4">
        <div class="card-body p-4">
          <div class="d-flex align-items-center justify-content-between mb-3">
            <div>
              <div class="fw-semibold">Horários</div>
              <div class="text-muted small">Blocos por dia da semana</div>
            </div>
            <a href="{% url 'homemcom_horarios' %}" class="btn btn-sm btn-outline-primary rounded-pill">
              Gerenciar horários →
            </a>
          </div>

          <div class="table-responsive">
            <table class="table align-middle mb-0">
              <thead>
                <tr>
                  <th>Dia</th>
                  <th>Início</th>
                  <th>Fim</th>
                  <th class="text-end">Status</th>
                </tr>
              </thead>
              <tbody>
                {% for h in horarios %}
                  <tr>
                    <td>{{ h.get_dia_semana_display }}</td>
                    <td>{{ h.inicio }}</td>
                    <td>{{ h.fim }}</td>
                    <td class="text-end">
                      {% if h.ativo %}
                        <span class="badge text-bg-success">Ativo</span>
                      {% else %}
                        <span class="badge text-bg-secondary">Inativo</span>
                      {% endif %}
                    </td>
                  </tr>
                {% empty %}
                  <tr>
                    <td colspan="4" class="text-muted">Nenhum horário ativo cadastrado.</td>
                  </tr>
                {% endfor %}
              </tbody>
            </table>
          </div>

          <div class="mt-3 small text-muted">
            * Os horários definem o que aparece como disponível para o cliente no link público.
          </div>
        </div>
      </div>
    </div>

  </div>
</div>
{% endblock %}